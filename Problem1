{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Problem 1 : Generation of Graph\n",
    "\n",
    "\n",
    "We are going to use the algorithm for generating random graphs of given degree distribution, thus we need a method to pick randomly numbers according to given distribution in order to build up the list of all degrees. Here it is simple since there are only two possible value. \n",
    "\n",
    "We define the function degree($\\pi$) that pick a 1 or 4 with probability $p_1$ or $p_4$ with the method of cumulants : if a random number picked with a uniform distribution is below $p_1 = 1-\\pi$ thus the function return 1 and 4 otherwise.\n",
    "\n",
    "Once the list, named K, of all degree is created, we can start the algorithm : \n",
    "* pick randomly two vertices (named v,w)\n",
    "* if it is possible to link them, link them \n",
    "\n",
    "We create L, the list of untreated vertices (once picked we know for sure that we can linked them) and we add a loop in order not to link the same vertex with itself. This add times to the computation since random numbers are picked but not use to build the graph. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import matplotlib.pyplot as plt\n",
    "import random as rdm\n",
    "import networkx as nx"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "#Degree Probability distribution\n",
    "def degree(pi_p):\n",
    "    if rdm.random() < (1-pi_p):\n",
    "        return 1\n",
    "    else:\n",
    "        return 4"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {
    "scrolled": false
   },
   "outputs": [],
   "source": [
    "# Initialisation of different parameters\n",
    "# --------------------------------------\n",
    "# --------------------------------------\n",
    "\n",
    "N = 100 #number of vertices\n",
    "pi = 0.7 #parameter of the degree distribution\n",
    "c=False\n",
    "while c==False:\n",
    "    K=[]\n",
    "    for i in range(N):\n",
    "        K.append(degree(pi)) #Creation of the list of all degrees\n",
    "    if sum(K)%2 == 0:\n",
    "        c=True\n",
    "G = nx.Graph()\n",
    "# Implementation of the algorithm for generating random graphs of given\n",
    "# Degre distribution \n",
    "L = [i for i in range(N) if K[i] > 0]\n",
    "error=0\n",
    "while len(L) > 1:\n",
    "    v=rdm.choice(L)\n",
    "    w=rdm.choice(L)\n",
    "    if w != v and (v,w) not in G.edges():\n",
    "        G.add_edge(v,w) \n",
    "        K[v] -= 1\n",
    "        K[w] -= 1\n",
    "    else:\n",
    "        error +=1\n",
    "    L = [i for i in range(N) if K[i] > 0]\n",
    "    if error>20:\n",
    "        c=False\n",
    "        while c==False:\n",
    "            K=[]\n",
    "            for i in range(N):\n",
    "                K.append(degree(pi)) #Creation of the list of all degrees\n",
    "            if sum(K)%2 == 0:\n",
    "                c=True\n",
    "        L = [i for i in range(N) if K[i]>0]\n",
    "        G = nx.Graph()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Let's test if the graph is coherent with what we expect by seing all his vertices' degree (Note that you can change the value of $\\pi$ to extremal value 0 and 1 in order to check this two simple cases) :"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "DegreeView({32: 4, 34: 4, 47: 4, 70: 4, 28: 1, 86: 1, 13: 1, 67: 4, 26: 4, 64: 4, 18: 4, 11: 4, 4: 4, 62: 1, 8: 4, 40: 1, 51: 1, 45: 4, 22: 1, 24: 4, 1: 1, 61: 4, 17: 4, 92: 4, 12: 4, 94: 1, 63: 4, 31: 1, 21: 4, 36: 4, 76: 4, 27: 4, 75: 4, 29: 1, 81: 4, 90: 1, 6: 1, 87: 4, 68: 4, 2: 4, 33: 4, 85: 4, 66: 1, 99: 4, 7: 4, 96: 4, 59: 1, 55: 1, 20: 1, 25: 4, 0: 4, 65: 1, 38: 4, 69: 1, 84: 4, 42: 4, 79: 1, 88: 4, 16: 1, 37: 1, 10: 4, 39: 4, 97: 1, 95: 4, 30: 1, 5: 4, 14: 1, 54: 4, 82: 1, 83: 4, 91: 4, 89: 4, 41: 4, 19: 4, 15: 1, 56: 4, 73: 1, 46: 4, 60: 4, 52: 4, 50: 4, 57: 4, 58: 4, 78: 4, 23: 4, 48: 4, 71: 1, 43: 1, 3: 4, 98: 4, 77: 1, 72: 4, 9: 1, 93: 1, 53: 4, 44: 4, 49: 1, 74: 4, 35: 1, 80: 1})"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "G.degree()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "One can see that the algorithm work and we do obtain the graph we are interested in. Nevetheless the lagorithm is quit long and for the project we will use the nc.configuration_model() function of the networkx module:\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "N=1000\n",
    "pi=0.6\n",
    "c=False\n",
    "while c==False:\n",
    "    K=[]\n",
    "    for i in range(N):\n",
    "        K.append(degree(pi)) #Creation of the list of all degrees\n",
    "    if sum(K)%2 == 0:\n",
    "        c=True\n",
    "\n",
    "G_nx = nx.configuration_model(K)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "MultiDegreeView({0: 1, 1: 4, 2: 4, 3: 4, 4: 1, 5: 1, 6: 1, 7: 4, 8: 4, 9: 1, 10: 4, 11: 4, 12: 4, 13: 4, 14: 4, 15: 1, 16: 1, 17: 4, 18: 4, 19: 4, 20: 4, 21: 4, 22: 1, 23: 4, 24: 4, 25: 4, 26: 4, 27: 4, 28: 1, 29: 1, 30: 4, 31: 1, 32: 1, 33: 1, 34: 4, 35: 1, 36: 4, 37: 4, 38: 1, 39: 4, 40: 4, 41: 1, 42: 1, 43: 4, 44: 4, 45: 4, 46: 4, 47: 4, 48: 1, 49: 4, 50: 1, 51: 4, 52: 4, 53: 4, 54: 4, 55: 4, 56: 4, 57: 4, 58: 1, 59: 4, 60: 1, 61: 4, 62: 1, 63: 1, 64: 1, 65: 4, 66: 4, 67: 4, 68: 4, 69: 4, 70: 1, 71: 1, 72: 1, 73: 4, 74: 4, 75: 1, 76: 4, 77: 1, 78: 1, 79: 4, 80: 4, 81: 4, 82: 4, 83: 4, 84: 1, 85: 4, 86: 4, 87: 1, 88: 1, 89: 1, 90: 1, 91: 4, 92: 4, 93: 4, 94: 1, 95: 1, 96: 1, 97: 4, 98: 4, 99: 1, 100: 4, 101: 1, 102: 4, 103: 1, 104: 4, 105: 4, 106: 4, 107: 4, 108: 4, 109: 4, 110: 4, 111: 1, 112: 4, 113: 1, 114: 4, 115: 4, 116: 4, 117: 1, 118: 1, 119: 4, 120: 1, 121: 1, 122: 4, 123: 4, 124: 4, 125: 4, 126: 4, 127: 1, 128: 4, 129: 4, 130: 4, 131: 1, 132: 4, 133: 4, 134: 1, 135: 4, 136: 4, 137: 1, 138: 1, 139: 1, 140: 4, 141: 1, 142: 4, 143: 4, 144: 1, 145: 4, 146: 4, 147: 4, 148: 1, 149: 1, 150: 1, 151: 4, 152: 4, 153: 4, 154: 4, 155: 4, 156: 4, 157: 4, 158: 4, 159: 4, 160: 4, 161: 4, 162: 4, 163: 4, 164: 4, 165: 1, 166: 1, 167: 1, 168: 1, 169: 4, 170: 1, 171: 4, 172: 4, 173: 1, 174: 4, 175: 4, 176: 1, 177: 1, 178: 4, 179: 4, 180: 4, 181: 4, 182: 4, 183: 4, 184: 1, 185: 4, 186: 4, 187: 1, 188: 1, 189: 1, 190: 1, 191: 4, 192: 4, 193: 4, 194: 4, 195: 4, 196: 1, 197: 4, 198: 4, 199: 1, 200: 4, 201: 4, 202: 4, 203: 1, 204: 4, 205: 1, 206: 4, 207: 4, 208: 4, 209: 1, 210: 1, 211: 4, 212: 4, 213: 4, 214: 1, 215: 1, 216: 1, 217: 4, 218: 1, 219: 4, 220: 1, 221: 4, 222: 4, 223: 4, 224: 4, 225: 1, 226: 1, 227: 1, 228: 4, 229: 1, 230: 4, 231: 4, 232: 4, 233: 4, 234: 4, 235: 1, 236: 1, 237: 4, 238: 1, 239: 1, 240: 1, 241: 1, 242: 4, 243: 4, 244: 4, 245: 4, 246: 1, 247: 1, 248: 1, 249: 1, 250: 1, 251: 4, 252: 4, 253: 4, 254: 4, 255: 4, 256: 1, 257: 4, 258: 4, 259: 1, 260: 4, 261: 1, 262: 4, 263: 1, 264: 1, 265: 4, 266: 1, 267: 1, 268: 4, 269: 4, 270: 1, 271: 4, 272: 4, 273: 1, 274: 4, 275: 4, 276: 4, 277: 4, 278: 4, 279: 4, 280: 4, 281: 4, 282: 4, 283: 1, 284: 4, 285: 4, 286: 1, 287: 4, 288: 4, 289: 1, 290: 1, 291: 4, 292: 4, 293: 4, 294: 1, 295: 4, 296: 4, 297: 4, 298: 4, 299: 4, 300: 1, 301: 4, 302: 1, 303: 4, 304: 1, 305: 1, 306: 4, 307: 4, 308: 4, 309: 1, 310: 1, 311: 4, 312: 4, 313: 1, 314: 4, 315: 4, 316: 1, 317: 4, 318: 4, 319: 4, 320: 4, 321: 4, 322: 4, 323: 4, 324: 4, 325: 4, 326: 1, 327: 1, 328: 1, 329: 4, 330: 1, 331: 1, 332: 1, 333: 4, 334: 1, 335: 4, 336: 4, 337: 4, 338: 4, 339: 4, 340: 1, 341: 4, 342: 4, 343: 4, 344: 4, 345: 4, 346: 4, 347: 1, 348: 4, 349: 4, 350: 4, 351: 4, 352: 4, 353: 1, 354: 4, 355: 4, 356: 1, 357: 4, 358: 1, 359: 4, 360: 4, 361: 1, 362: 4, 363: 1, 364: 4, 365: 4, 366: 4, 367: 4, 368: 4, 369: 4, 370: 4, 371: 4, 372: 1, 373: 1, 374: 4, 375: 4, 376: 4, 377: 4, 378: 4, 379: 4, 380: 1, 381: 4, 382: 1, 383: 4, 384: 4, 385: 1, 386: 1, 387: 1, 388: 4, 389: 1, 390: 4, 391: 4, 392: 1, 393: 4, 394: 4, 395: 1, 396: 4, 397: 4, 398: 4, 399: 1, 400: 4, 401: 4, 402: 4, 403: 4, 404: 4, 405: 1, 406: 1, 407: 4, 408: 4, 409: 4, 410: 1, 411: 1, 412: 4, 413: 1, 414: 1, 415: 4, 416: 4, 417: 1, 418: 4, 419: 4, 420: 1, 421: 4, 422: 1, 423: 1, 424: 4, 425: 1, 426: 4, 427: 4, 428: 1, 429: 4, 430: 1, 431: 1, 432: 1, 433: 1, 434: 4, 435: 1, 436: 1, 437: 4, 438: 4, 439: 1, 440: 1, 441: 1, 442: 1, 443: 4, 444: 4, 445: 1, 446: 4, 447: 1, 448: 4, 449: 1, 450: 4, 451: 1, 452: 4, 453: 4, 454: 1, 455: 4, 456: 4, 457: 4, 458: 4, 459: 4, 460: 1, 461: 1, 462: 4, 463: 1, 464: 4, 465: 1, 466: 1, 467: 4, 468: 1, 469: 4, 470: 1, 471: 4, 472: 1, 473: 1, 474: 4, 475: 4, 476: 4, 477: 4, 478: 1, 479: 4, 480: 4, 481: 4, 482: 1, 483: 4, 484: 4, 485: 4, 486: 1, 487: 1, 488: 1, 489: 4, 490: 1, 491: 4, 492: 4, 493: 4, 494: 4, 495: 4, 496: 1, 497: 1, 498: 4, 499: 4, 500: 4, 501: 4, 502: 4, 503: 4, 504: 1, 505: 4, 506: 1, 507: 1, 508: 4, 509: 4, 510: 4, 511: 4, 512: 4, 513: 4, 514: 1, 515: 4, 516: 4, 517: 4, 518: 4, 519: 1, 520: 1, 521: 4, 522: 4, 523: 4, 524: 4, 525: 4, 526: 1, 527: 4, 528: 4, 529: 4, 530: 4, 531: 1, 532: 1, 533: 1, 534: 1, 535: 4, 536: 1, 537: 4, 538: 4, 539: 4, 540: 4, 541: 1, 542: 4, 543: 1, 544: 4, 545: 1, 546: 4, 547: 4, 548: 4, 549: 1, 550: 1, 551: 1, 552: 4, 553: 4, 554: 1, 555: 1, 556: 4, 557: 4, 558: 1, 559: 4, 560: 4, 561: 4, 562: 1, 563: 4, 564: 1, 565: 4, 566: 4, 567: 4, 568: 4, 569: 4, 570: 1, 571: 4, 572: 1, 573: 4, 574: 1, 575: 1, 576: 4, 577: 1, 578: 4, 579: 1, 580: 4, 581: 4, 582: 4, 583: 4, 584: 4, 585: 4, 586: 4, 587: 1, 588: 1, 589: 4, 590: 4, 591: 1, 592: 4, 593: 1, 594: 4, 595: 4, 596: 1, 597: 1, 598: 4, 599: 4, 600: 4, 601: 1, 602: 4, 603: 4, 604: 4, 605: 1, 606: 4, 607: 4, 608: 1, 609: 1, 610: 4, 611: 1, 612: 1, 613: 1, 614: 4, 615: 1, 616: 1, 617: 4, 618: 1, 619: 4, 620: 4, 621: 4, 622: 4, 623: 4, 624: 1, 625: 4, 626: 4, 627: 4, 628: 4, 629: 1, 630: 4, 631: 4, 632: 1, 633: 4, 634: 1, 635: 1, 636: 4, 637: 4, 638: 1, 639: 4, 640: 1, 641: 1, 642: 4, 643: 4, 644: 4, 645: 1, 646: 1, 647: 4, 648: 4, 649: 4, 650: 4, 651: 4, 652: 1, 653: 1, 654: 4, 655: 4, 656: 4, 657: 4, 658: 1, 659: 1, 660: 4, 661: 4, 662: 4, 663: 1, 664: 4, 665: 1, 666: 4, 667: 1, 668: 4, 669: 4, 670: 4, 671: 1, 672: 1, 673: 4, 674: 4, 675: 4, 676: 4, 677: 4, 678: 1, 679: 4, 680: 4, 681: 4, 682: 4, 683: 4, 684: 4, 685: 1, 686: 1, 687: 4, 688: 1, 689: 1, 690: 4, 691: 4, 692: 1, 693: 1, 694: 4, 695: 4, 696: 4, 697: 1, 698: 4, 699: 1, 700: 4, 701: 4, 702: 4, 703: 1, 704: 4, 705: 4, 706: 4, 707: 4, 708: 4, 709: 4, 710: 1, 711: 1, 712: 4, 713: 4, 714: 1, 715: 4, 716: 1, 717: 4, 718: 1, 719: 1, 720: 4, 721: 4, 722: 4, 723: 1, 724: 1, 725: 4, 726: 1, 727: 4, 728: 4, 729: 1, 730: 1, 731: 4, 732: 4, 733: 4, 734: 4, 735: 1, 736: 4, 737: 4, 738: 1, 739: 4, 740: 4, 741: 4, 742: 4, 743: 4, 744: 4, 745: 1, 746: 1, 747: 1, 748: 4, 749: 4, 750: 4, 751: 1, 752: 1, 753: 4, 754: 1, 755: 4, 756: 1, 757: 4, 758: 4, 759: 1, 760: 4, 761: 4, 762: 4, 763: 4, 764: 1, 765: 4, 766: 4, 767: 1, 768: 1, 769: 4, 770: 4, 771: 4, 772: 1, 773: 1, 774: 1, 775: 4, 776: 4, 777: 4, 778: 1, 779: 4, 780: 1, 781: 1, 782: 4, 783: 4, 784: 1, 785: 4, 786: 4, 787: 1, 788: 1, 789: 1, 790: 1, 791: 1, 792: 4, 793: 4, 794: 4, 795: 1, 796: 4, 797: 4, 798: 4, 799: 1, 800: 4, 801: 4, 802: 4, 803: 4, 804: 1, 805: 1, 806: 4, 807: 1, 808: 4, 809: 4, 810: 4, 811: 1, 812: 4, 813: 1, 814: 4, 815: 4, 816: 4, 817: 1, 818: 4, 819: 1, 820: 1, 821: 4, 822: 1, 823: 4, 824: 1, 825: 4, 826: 4, 827: 4, 828: 1, 829: 4, 830: 4, 831: 4, 832: 1, 833: 4, 834: 1, 835: 1, 836: 1, 837: 4, 838: 1, 839: 4, 840: 1, 841: 1, 842: 4, 843: 4, 844: 4, 845: 1, 846: 4, 847: 1, 848: 4, 849: 1, 850: 4, 851: 4, 852: 4, 853: 4, 854: 1, 855: 1, 856: 1, 857: 1, 858: 1, 859: 4, 860: 4, 861: 4, 862: 4, 863: 1, 864: 4, 865: 4, 866: 4, 867: 1, 868: 1, 869: 1, 870: 4, 871: 4, 872: 1, 873: 4, 874: 4, 875: 4, 876: 1, 877: 1, 878: 4, 879: 1, 880: 4, 881: 4, 882: 1, 883: 4, 884: 4, 885: 4, 886: 1, 887: 4, 888: 1, 889: 4, 890: 1, 891: 4, 892: 4, 893: 4, 894: 4, 895: 1, 896: 1, 897: 4, 898: 4, 899: 4, 900: 4, 901: 4, 902: 4, 903: 1, 904: 1, 905: 1, 906: 1, 907: 1, 908: 4, 909: 4, 910: 4, 911: 1, 912: 4, 913: 1, 914: 1, 915: 1, 916: 4, 917: 4, 918: 4, 919: 4, 920: 4, 921: 4, 922: 1, 923: 4, 924: 4, 925: 4, 926: 4, 927: 4, 928: 4, 929: 4, 930: 4, 931: 4, 932: 1, 933: 4, 934: 1, 935: 1, 936: 4, 937: 1, 938: 4, 939: 4, 940: 4, 941: 4, 942: 4, 943: 4, 944: 4, 945: 4, 946: 4, 947: 4, 948: 4, 949: 4, 950: 4, 951: 4, 952: 4, 953: 4, 954: 4, 955: 4, 956: 1, 957: 4, 958: 1, 959: 4, 960: 4, 961: 4, 962: 4, 963: 4, 964: 1, 965: 4, 966: 4, 967: 4, 968: 4, 969: 1, 970: 4, 971: 4, 972: 4, 973: 1, 974: 1, 975: 4, 976: 4, 977: 4, 978: 4, 979: 4, 980: 1, 981: 4, 982: 1, 983: 4, 984: 1, 985: 4, 986: 4, 987: 4, 988: 4, 989: 1, 990: 4, 991: 1, 992: 1, 993: 1, 994: 1, 995: 4, 996: 4, 997: 4, 998: 4, 999: 4})"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "G_nx.degree()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.2"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
